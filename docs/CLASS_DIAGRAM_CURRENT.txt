Current Class Diagram (Domain)le 2 et 3 fev 2026
==============================

Mermaid (classDiagram)
----------------------
classDiagram
  direction LR

  class Tenant {
    +Long id
    +String name
    +String subdomain
    +String contactEmail
    +String contactPhone
    +String logoUrl
    +TenantStatus status
    +Locale defaultLocale
  }

  class Store {
    +Long id
    +Long tenantId
    +String name
    +String code
    +String address
    +String city
    +String postalCode
    +String country
    +String phone
    +String email
    +String imageUrl
    +BigDecimal latitude
    +BigDecimal longitude
    +boolean active
  }

  class User {
    +Long id
    +Long tenantId
    +String email
    +String passwordHash
    +String firstName
    +String lastName
    +String phone
    +String imageUrl
    +LocalDateTime lastLogin
    +boolean enabled
  }

  class Role {
    +Long id
    +Long tenantId
    +String code
    +String label
    +boolean systemRole
  }

  class Permission {
    +Long id
    +String code
    +String domain
    +String description
  }

  class UserRoleAssignment {
    +Long id
    +Long tenantId
    +Long userId
    +Long roleId
    +boolean active
  }

  class RolePermission {
    +Long id
    +Long tenantId
    +Long roleId
    +Long permissionId
  }

  class RefreshToken {
    +Long id
    +Long tenantId
    +Long userId
    +String tokenHash
    +LocalDateTime expiresAt
    +LocalDateTime revokedAt
    +String deviceInfo
  }

  class AuditEvent {
    +Long id
    +Long tenantId
    +String entityType
    +Long entityId
    +AuditAction action
    +String beforeJson
    +String afterJson
    +Long actorUserId
    +String ipAddress
    +String userAgent
    +String correlationId
    +LocalDateTime occurredAt
  }

  class Locale {
    <<enum>>
    FR
    AR
    EN
  }

  class TenantStatus {
    <<enum>>
    ACTIVE
    SUSPENDED
    TRIAL
    EXPIRED
  }

  class AuditAction {
    <<enum>>
    CREATE
    UPDATE
    DELETE
    STATUS_CHANGE
  }

  Tenant "1" --> "many" Store : owns
  Tenant "1" --> "many" User : owns
  User "1" --> "many" RefreshToken : tokens
  User "1" --> "many" AuditEvent : actions
  Role "1" --> "many" RolePermission : grants
  Permission "1" --> "many" RolePermission : used by
  User "1" --> "many" UserRoleAssignment : assigned
  Role "1" --> "many" UserRoleAssignment : assigned
